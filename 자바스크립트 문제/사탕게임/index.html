<!DOCTYPE html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>사탕 게임</title>
  </head>
  <body>
    <script>
      const [n, ...arr] = prompt('입력해 주세요.').toString().trim().split('\n');
      let ch = arr.map(r => r.replace('\r', '').split('')); 
      let answer = 0;
      let row = 1;
      let col = 1;
      for (let i = 0; i<n; i++) {
        for (let j = 0; j<n; j++) {
          //가로 교환 
          if (j !== (n-1)) {
            [ ch[i][j], ch[i][j+1] ] =  [ch[i][j+1], ch[i][j] ]; 
            check(n, row, col);
            if (answer === n) break;
            //원위치
            [ ch[i][j], ch[i][j+1] ] =  [ch[i][j+1], ch[i][j] ];
            
          }
          
          // 세로 교환
          if (i !== (n-1)) {
            [ch[i][j], ch[i + 1][j]] = [ch[i + 1][j], ch[i][j]]; 
            check(n, row, col);
            if (answer === n) break;
            // 원위치
            [ch[i][j], ch[i + 1][j]] = [ch[i + 1][j], ch[i][j]];
          }
        }
      }
      console.log(answer);

      function check (n, row, col) {
        for (let k = 0; k<n; k++) {   
          for (let l = 0; l<n; l++) {
            if (l !== (n-1)) {
              if (ch[k][l] === ch[k][l+1]) { 
                row+=1;
              } else if (ch[k][l] !== ch[k][l+1] && row >= 2) {
                row-=1;
              }
              
              if (ch[l][k] === ch[l+1][k]) {
                col+=1 ;
              } else if (ch[l][k] !== ch[l+1][k] && col >= 2) {
                col-=1 ;
              }
              answer = Math.max(row, col, answer);
              if (answer === n) return answer;
            }
          }
          row = 1;
          col = 1;
        }   
        row = 1;
        col = 1;
      }
    </script>
    
  </body>
</html>
